{"version":3,"sources":["store/ducks/index.js","store/sagas/index.js","store/index.js","Components/AddImage/index.js","Components/TopBar/index.js","placeholder.png","Components/Editor/index.js","Components/Slider/index.js","Components/ImagesList/index.js","Components/IconsList/index.js","App.js","reportWebVitals.js","index.js"],"names":["reducers","combineReducers","default","screenWidth","state","action","type","images","state_new","concat","image","slice","find","id","iconInfo","filter","iconSelected","iconId","imageSelected","imageId","icons","icon","state_new_","screen","screenHeight","orientation","mode","rootSaga","all","sagaMiddleware","createSagaMiddleware","middlewares","store","createStore","compose","applyMiddleware","run","sagas","AddImage","props","useSelector","e","a","files","target","currentId","Array","from","forEach","file","index","array","Image","src","URL","createObjectURL","onload","dispatch","url","this","height","width","length","alert","console","log","value","className","for","onChange","name","accept","multiple","onClick","map","output","placeHolderInfo","TopBar","stepEnabled","back","path","mdiRedoVariant","size","style","transform","color","redo","Editor","useState","x","y","rot","scale","flip","setIconInfo","editorScale","setEditorScale","dragStart","setDragStart","scaleStart","setScaleStart","dragTwoFingerXY","setDragTwoFingerXY","dist","dragTwoFingerStart","setDragTwoFingerStart","touchCount","setTouchCount","isEditing","setIsEditing","isDragging","setIsDragging","isScaling","setIsScaling","isTwoFingerDragging","setIsTwoFingerDragging","isChanging","setIsChanging","steps","setSteps","setStepEnabled","currentStep","setCurrentStep","editor","document","getElementById","addEventListener","preventDefault","passive","currentImage","currentImageIndex","findIndex","currentIcon","useEffect","updateImageSize","setTimeout","updateEditorIconInfo","updateStepEnabled","steps_","currentStep_","saveStep","push","editorScale_","PLACEHOLDER_SIZE","placeHolder","editorHeight","clientHeight","editorWidth","clientWidth","handleDragStart","ev","clientX","clientY","startX","startY","handleDragMove","handleScaleStart","head","getBoundingClientRect","centerX","left","centerY","top","Math","hypot","rotation","angle","atan2","PI","handleScaleMove","handleEnd","handleDragTwoFinger","start","dragTwoFingerXY_","nativeEvent","targetTouches","contains","Object","keys","mouseMove","onMouseMove","isMobile","onTouchMove","onMouseUp","onTouchStart","onTouchEnd","theStep","newIconInfo","backgroundImage","undefined","onMouseEnter","onMouseLeave","placeHolderImage","fontSize","padding","borderRadius","mdiExclamationThick","borderWidth","draggable","onMouseDown","pointerEvents","mdiRotateLeft","iconInfo_","mdiFlipHorizontal","mdiDelete","mdiArrowLeftBold","rotate","Slider","WIDTH","HEIGHT","vertical","selectedId","selectedText","selectItem","deleteItem","canDelete","highlighted","setHighlighted","imagesList","ratio","relatedTarget","mdiCloseThick","ImagesList","IconsList","containerStyle","some","temp_images","App","URLSearchParams","useLocation","search","resizeLoop","doneResizing","window","innerWidth","innerHeight","matchMedia","clearTimeout","flex","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.eb0652fa.chunk.js","sourcesContent":["import { combineReducers } from 'redux';\n\n// import { reducer as session } from './session';\n\nconst screenWidthReducer = ( state = 1, action ) => {\n  switch( action.type ) {\n    case 'SET_SCREENWIDTH':\n      return action.screenWidth;\n    default: return state;\n  }\n}\n\nconst imagesReducer = ( state = [], action ) => {\n  let state_new;\n  switch( action.type ) {\n    case 'SET_IMAGES':\n      return action.images;\n    case 'ADD_IMAGE':\n      return state.concat(action.image);\n    // case 'UPDATE_PLACEHOLDER':\n    //   state_new = state.slice();\n    //   state_new.find(image => image.id == action.id).placeHolder = action.placeHolder;\n    //   return state_new;\n    case 'UPDATE_ICONINFO':\n      state_new = state.slice();\n      state_new.find(image => image.id == action.id).iconInfo = action.iconInfo;\n      return state_new;\n    case 'DELETE_IMAGE':\n      state_new = state.slice();\n      state_new = state_new.filter(image => image.id != action.id);\n      return state_new;\n    case 'SELECT_ICON':\n      state_new = state.slice();\n      if(state_new.find(image => image.id == action.id).iconSelected == action.iconId) {\n        state_new.find(image => image.id == action.id).iconSelected = -1;\n        state_new.find(image => image.id == action.id).iconInfo = null;\n      }\n      else state_new.find(image => image.id == action.id).iconSelected = action.iconId;\n      return state_new;\n    case 'UNSELECT_ICON':\n      state_new = state.slice();\n      state_new.find(image => image.id == action.id).iconSelected = -1;\n      state_new.find(image => image.id == action.id).iconInfo = null;\n      return state_new;\n    default: return state;\n  }\n}\n\nconst imageSelectedReducer = ( state = -1, action ) => {\n  switch( action.type ) {\n    case 'SELECT_IMAGE':\n      return action.id;\n    default: return state;\n  }\n}\n\nconst imageIdReducer = ( state = 0, action ) => {\n  switch( action.type ) {\n    case 'UPDATE_ID':\n      return action.id;\n    default: return state;\n  }\n}\n\nconst iconIdReducer = ( state = 0, action ) => {\n  switch( action.type ) {\n    case 'UPDATE_ICON_ID':\n      return action.id;\n    default: return state;\n  }\n}\n\nconst iconsReducer = ( state = [], action ) => {\n  switch( action.type ) {\n    case 'ADD_ICON':\n      return state.concat(action.icon);\n    case 'DELETE_ICON':\n      let state_new_ = state.slice();\n      state_new_ = state_new_.filter(icon => icon.id != action.id);\n      return state_new_;\n    default: return state;\n  }\n}\n\nconst iconSelectedReducer = ( state = -1, action ) => {\n  switch( action.type ) {\n    case 'SELECT_ICON':\n      if (state == action.iconId) return -1;\n      else return action.iconId;\n      \n    default: return state;\n  }\n}\n\nconst screenReducer = ( state = {}, action ) => {\n  switch( action.type ) {\n    case 'SET_SCREEN':\n      return {screenWidth:action.screenWidth,screenHeight:action.screenHeight,orientation:action.orientation};\n      \n    default: return state;\n  }\n}\n\nconst modeReducer = ( state = null, action ) => {\n  switch( action.type ) {\n    case 'SELECT_MODE':\n      return action.mode;\n      \n    default: return state;\n  }\n}\n\nconst reducers = combineReducers({\n  default: () => [],\n\n  screenWidth: screenWidthReducer,\n\n  images: imagesReducer,\n  imageSelected: imageSelectedReducer,\n  imageId: imageIdReducer,\n\n  icons: iconsReducer,\n  iconSelected: iconSelectedReducer,\n  iconId: iconIdReducer,\n\n  screen: screenReducer,\n\n  mode: modeReducer,\n\n});\n\nexport default reducers;\n","import {\n  all,\n  // takeLatest,\n} from 'redux-saga/effects';\n\n// import { SessionTypes } from '../ducks/session';\n// import { getSessionRequest } from './session';\n\nexport default function* rootSaga() {\n  yield all([\n    // takeLatest(SessionTypes.GET_SESSION_REQUEST, getSessionRequest),\n  ]);\n}\n","import { createStore, compose, applyMiddleware } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\n\nimport reducers from './ducks';\nimport sagas from './sagas';\n\nconst sagaMiddleware = createSagaMiddleware();\nconst middlewares = [sagaMiddleware];\nconst store = createStore(reducers, compose(applyMiddleware(...middlewares)));\n\nsagaMiddleware.run(sagas);\n\nexport default store;\n","import './style.css';\nimport React, { useState, useEffect, useRef } from 'react';\nimport store from '../../store';\nimport { useSelector } from \"react-redux\";\n\nfunction AddImage(props) {\n\n  const iconId = useSelector(state => state.iconId);\n  const mode = useSelector(state => state.mode);\n  const screen = useSelector(state => state.screen);\n  const images = useSelector(state => state.images);\n\n  async function handleFileUpload(e) {\n    try {\n      const files = e.target.files;\n      if (!files) return;\n\n      let currentId = iconId;\n\n      Array.from(files).forEach((file,index,array)  => {\n        let image = new Image();\n        image.src = URL.createObjectURL(file);;\n        image.onload = function () {\n          store.dispatch({type:'ADD_ICON',icon:{url:this.src,height:this.height,width:this.width,id:currentId+index}})\n        };\n      });\n\n      store.dispatch({type:'UPDATE_ICON_ID',id:currentId+Array.from(files).length});\n\n    } catch (error) {\n      alert(error);\n      console.log(\"Catch Error: \", error);\n    } finally {\n      e.target.value = '';  // reset input file\n    }\n  }\n\n  const save = () => {\n    if(mode=='user'){\n      console.log(images.map(image=>{\n        let output = {};\n        output.id = image.id;\n        output.iconInfo = image.iconInfo;\n        return output;\n      }));\n    }\n    else if(mode=='admin'){\n      console.log(images.map(image=>{\n        let output = {};\n        output.id = image.id;\n        output.placeHolderInfo = image.iconInfo;\n        return output;\n      }));\n    }\n  }\n\n\n  return (\n    <div className={mode=='user'&&screen.screenWidth>768&&screen.screenHeight>768?\"actionContainer block\":\"actionContainer\"}>\n\n      {mode=='user'?(\n        <>\n          <label for=\"add-image\">上傳圖片</label>\n          <input onChange={handleFileUpload} type=\"file\" id=\"add-image\" name=\"uploadPhotoInput\" accept=\"image/*\" multiple=\"multiple\"/>\n        </>\n      ):null}\n      \n      <label onClick={save}>儲存</label>\n\n    </div>\n  );\n}\n\nexport default AddImage;\n\n\n\n","import './style.css';\nimport React, { useState, useEffect, useRef } from 'react';\nimport store from '../../store';\nimport { useSelector } from \"react-redux\";\n\nimport AddImage from '../../Components/AddImage';\nimport Icon from '@mdi/react'\nimport { mdiRedoVariant } from '@mdi/js';\n\nfunction TopBar(props) {\n  const mode = useSelector(state => state.mode);\n  const screen = useSelector(state => state.screen);\n\n  return (\n    <div className=\"topBarContainer\">\n      <div className={props.stepEnabled.back?'stepButton':'stepButton disabled'} onClick={props.back}>\n        <Icon path={mdiRedoVariant} size={0.8} style={{transform:`scaleX(-1)`}} color=\"grey\"/>\n        復原\n      </div>\n      <div className={props.stepEnabled.redo?'stepButton':'stepButton disabled'} onClick={props.redo}>\n        <Icon path={mdiRedoVariant} size={0.8} color=\"grey\"/>\n        重做\n      </div>\n\n      {mode=='admin'||screen.screenHeight<=768||screen.screenWidth<=768? <AddImage/>:null}\n    </div>\n  );\n}\n\nexport default TopBar;\n\n\n\n","export default __webpack_public_path__ + \"static/media/placeholder.ed744db1.png\";","import './style.css';\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useSelector } from \"react-redux\";\nimport store from '../../store';\nimport {isMobile} from 'react-device-detect';\n\nimport TopBar from '../../Components/TopBar';\nimport Icon from '@mdi/react'\nimport { mdiExclamationThick } from '@mdi/js';\nimport { mdiFlipHorizontal } from '@mdi/js';\nimport { mdiDelete } from '@mdi/js';\nimport { mdiArrowLeftBold } from '@mdi/js';\nimport { mdiRotateLeft } from '@mdi/js';\n\nimport placeHolderImage from '../../placeholder.png';\n\nlet PLACEHOLDER_SIZE = 350;\n// let PLACEHOLDER_SCALE = 0.1;\n// let EDIT_ICON_SCALE = 0.01;\n\nfunction Editor(props) {\n  // if(isMobile) {\n  //   PLACEHOLDER_SIZE = 150;\n  // }\n\n  const mode = useSelector(state => state.mode);\n  const screen = useSelector(state => state.screen);\n  const images = useSelector(state => state.images);\n  const imageSelected = useSelector(state => state.imageSelected);\n  const icons = useSelector(state => state.icons);\n\n  const [iconInfo,setIconInfo] = useState({width:PLACEHOLDER_SIZE,height:PLACEHOLDER_SIZE,x:0,y:0,rot:0,scale:1,flip:false});\n  const [editorScale,setEditorScale] = useState(1);\n\n  const [dragStart,setDragStart] = useState({});\n  const [scaleStart,setScaleStart] = useState({});\n  const [dragTwoFingerXY,setDragTwoFingerXY] = useState([{},{}]);\n  const [dragTwoFingerStart,setDragTwoFingerStart] = useState({scale:1,dist:-1});\n  const [touchCount,setTouchCount] = useState(0);\n\n  const [isEditing,setIsEditing] = useState(false);\n  const [isDragging,setIsDragging] = useState(false);\n  const [isScaling,setIsScaling] = useState(false);\n  const [isTwoFingerDragging,setIsTwoFingerDragging] = useState(false);\n  const [isChanging,setIsChanging] = useState(false);\n\n  const [steps,setSteps] = useState([]);\n  const [stepEnabled,setStepEnabled] = useState({back:false,redo:false});\n  const [currentStep,setCurrentStep] = useState([]);\n\n  const editor = document.getElementById('editorImage');\n  if(editor) editor.addEventListener('touchmove', e => {\n      e.preventDefault();\n  }, { passive: false });\n\n  const currentImage = imageSelected==-1? null:images.find(image => image.id == imageSelected);\n  const currentImageIndex = imageSelected==-1? null:images.findIndex(image => image.id == imageSelected);\n  const currentIcon = imageSelected==-1 || currentImage.iconSelected==-1? null:icons.find(icon=>icon.id==currentImage.iconSelected); \n\n  useEffect(() => {\n    if(currentImageIndex==null&&images.length>0) {\n      store.dispatch({type:'SELECT_IMAGE',id:images[0].id});\n      setSteps(images.map(image=>[]));\n      setCurrentStep(images.map(image=>-1));\n    }\n  }, [images]);\n \n  useEffect(() => {\n    updateImageSize();\n  }, [screen]);\n\n  useEffect(() => {\n    if(imageSelected!=-1) {\n      setIsChanging(true);\n      setTimeout(()=> {\n        setIsChanging(false);\n        let editorScale = updateImageSize();\n        updateEditorIconInfo(editorScale);\n        updateStepEnabled();\n      }, 200);\n    }\n  }, [imageSelected]);\n\n  useEffect(() => {\n    if(currentIcon!=null) {\n      setIsEditing(false);\n      updateEditorIconInfo();\n    }\n    else {\n      let steps_ = steps.slice();\n      steps_[currentImageIndex] = [];\n      setSteps(steps_);\n\n      let currentStep_ = currentStep.slice();\n      currentStep_[currentImageIndex] = -1;\n      setCurrentStep(currentStep_);\n    }\n  }, [currentIcon]);\n\n  useEffect(() => {\n    if(touchCount>1) {\n      setIsDragging(false);\n    }\n  }, [touchCount]);\n\n  //step\n  const updateStepEnabled = () => {\n    let back = currentImageIndex!=null && steps[currentImageIndex].length>1 && currentStep[currentImageIndex]!=0;\n    let redo = currentImageIndex!=null && currentStep[currentImageIndex]!=-1 && steps[currentImageIndex].length>currentStep[currentImageIndex]+1;\n    setStepEnabled({back:back,redo:redo});\n  }\n\n  useEffect(() => {\n    updateStepEnabled();\n  }, [currentStep]);\n\n  const saveStep = (iconInfo) => {\n    store.dispatch({type:'UPDATE_ICONINFO',iconInfo:iconInfo,id:imageSelected});\n\n    if(currentImageIndex!=null) {\n\n      let steps_ = steps.slice(); \n      let currentStep_ = currentStep.slice();\n\n      steps_[currentImageIndex] = steps_[currentImageIndex].slice(0,currentStep_[currentImageIndex]+1);\n      steps_[currentImageIndex].push(iconInfo);\n      currentStep_[currentImageIndex] += 1;\n\n      setSteps(steps_);\n      setCurrentStep(currentStep_);\n    }\n  }\n\n  const stepBack = () => {\n    if(stepEnabled.back){\n\n      let theStep;\n      if(currentStep[currentImageIndex] == -1) theStep = steps[currentImageIndex].length-2; \n      else theStep = currentStep[currentImageIndex]-1;\n\n      let newIconInfo = steps[currentImageIndex][theStep];\n      store.dispatch({type:'UPDATE_ICONINFO',iconInfo:newIconInfo,id:imageSelected});\n      setIconInfo(newIconInfo);\n\n      let currentStep_ = currentStep.slice();\n      currentStep_[currentImageIndex] = theStep;\n      setCurrentStep(currentStep_);\n\n    }\n  }\n\n  const stepRedo = () => {\n    if(stepEnabled.redo){\n\n      let theStep = currentStep[currentImageIndex]+1; \n\n      let newIconInfo = steps[currentImageIndex][theStep];\n      store.dispatch({type:'UPDATE_ICONINFO',iconInfo:newIconInfo,id:imageSelected});\n      setIconInfo(newIconInfo);\n\n      let currentStep_ = currentStep.slice();\n      currentStep_[currentImageIndex] = theStep;\n      setCurrentStep(currentStep_);\n    }\n  }\n\n  const updateEditorIconInfo = (editorScale_) => {\n    let iconInfo = {};\n    if(!editorScale_) editorScale_ = editorScale;\n    if (mode=='admin'){\n      if(currentImage.iconInfo == null) {\n        let PLACEHOLDER_SIZE = screen.screenWidth>768? 350:150;\n        iconInfo.rot = 0;\n        iconInfo.scale = 1/editorScale_;\n        iconInfo.width = PLACEHOLDER_SIZE;\n        iconInfo.height = PLACEHOLDER_SIZE;\n        iconInfo.x = currentImage.width*0.5;\n        iconInfo.y = currentImage.height*0.5;\n      }\n      else iconInfo = currentImage.iconInfo;\n      setIconInfo(iconInfo);\n      if(currentStep[currentImageIndex]==-1) saveStep(iconInfo);\n    }\n    else if (mode=='user' && currentIcon!=null) {\n      if(currentImage.iconInfo == null) iconInfo = currentImage.placeHolder;\n      else iconInfo = currentImage.iconInfo;\n      iconInfo.scale *= (iconInfo.width/currentIcon.width + iconInfo.height/currentIcon.height)*0.5;\n      iconInfo.width = currentIcon.width;\n      iconInfo.height = currentIcon.height;\n      setIconInfo(iconInfo);\n      if(currentStep[currentImageIndex]==-1) saveStep(iconInfo);\n    }\n  }\n\n  const updateImageSize = () => {\n    if(imageSelected!=-1){\n      let editorHeight = document.getElementById('editorWindow').clientHeight;\n      let editorWidth = document.getElementById('editorWindow').clientWidth;\n\n      let ratio = currentImage.width / currentImage.height;\n      let editorRatio = editorWidth/editorHeight;\n      let editorScale;\n\n      if(ratio>editorRatio) {\n        editorScale = editorWidth/currentImage.width;\n      }\n      else {\n        editorScale = editorHeight/currentImage.height;\n      }\n\n      setEditorScale(editorScale);\n      return editorScale;\n    }\n  }\n\n  //move\n  const handleDragStart = (ev) => {\n    setIsDragging(true);\n    setDragStart({\n      x:ev.clientX,\n      y:ev.clientY,\n      startX:iconInfo.x,\n      startY:iconInfo.y,\n    });\n  }\n\n  const handleDragMove = (ev) => {\n    let x = (ev.clientX - dragStart.x)/editorScale;\n    let y = (ev.clientY - dragStart.y)/editorScale;\n    setIconInfo({width:iconInfo.width,height:iconInfo.height,x:dragStart.startX+x,y:dragStart.startY+y,rot:iconInfo.rot,scale:iconInfo.scale,flip:iconInfo.flip});\n  }\n\n  const handleScaleStart = (ev) => {\n    setIsScaling(true);\n    let head = document.getElementById('headMoving').getBoundingClientRect();\n    let centerX = head.left+head.width*0.5;\n    let centerY = head.top+head.height*0.5;\n    let x = ev.clientX - centerX;\n    let y = ev.clientY - centerY; \n    setScaleStart({\n      centerX:centerX,\n      centerY:centerY,\n      dist:Math.hypot(x,y),\n      scale:iconInfo.scale,\n      rotation:iconInfo.rot,\n      angle: Math.atan2(y,  x) / Math.PI * 180,\n    });\n  }\n\n  const handleScaleMove = (ev) => {\n    let x = ev.clientX - scaleStart.centerX;\n    let y = ev.clientY - scaleStart.centerY; \n    let scale = scaleStart.scale*Math.hypot(x,y)/scaleStart.dist;\n    // if (scale<SCALE_MIN) scale = SCALE_MIN;\n    let rot = scaleStart.rotation + (Math.atan2(y,  x) / Math.PI * 180 - scaleStart.angle);\n    setIconInfo({width:iconInfo.width,height:iconInfo.height,x:iconInfo.x,y:iconInfo.y,rot:rot,scale:scale,flip:iconInfo.flip});\n  }\n\n  const handleFlip = () => {\n    if(isEditing){\n      let iconInfo_ = {width:iconInfo.width,height:iconInfo.height,x:iconInfo.x,y:iconInfo.y,rot:iconInfo.rot,scale:iconInfo.scale,flip:!iconInfo.flip};\n      setIconInfo(iconInfo_);\n      saveStep(iconInfo_);\n    }\n  }\n\n  const handleEnd = () => {\n    if(isEditing){\n      // console.log('end');\n      if(isScaling) setIsScaling(false);\n      if(isDragging) setIsDragging(false);\n      if(isTwoFingerDragging) {\n        setDragTwoFingerStart({scale:1,dist:-1});\n        setDragTwoFingerXY([{},{}]);\n        setIsTwoFingerDragging(false);\n      }\n      if(isScaling||isDragging||isTwoFingerDragging) {\n        saveStep(iconInfo);\n      }\n      setTouchCount(0);\n    }\n  }\n\n  const handleTouchMove = (e) => {\n    if(isEditing){\n      handleDragTwoFinger(e);\n      if(isDragging && document.getElementById('headMoving').contains(e.target))handleDragMove(e.nativeEvent.targetTouches[0]);\n      else if(isScaling && e.target==document.getElementById('scaleButton')) handleScaleMove(e.nativeEvent.targetTouches[0])\n   }\n  } \n\n  const handleTouchStart = (e) => {\n\n    if(isEditing){\n      if(e.targetTouches.length==2){\n        handleDragTwoFinger(e,true);\n      }\n      else if(touchCount==0){\n        handleDragTwoFinger(e);\n        if(e.target==document.getElementById('scaleButton')) handleScaleStart(e.nativeEvent.targetTouches[0]);\n        else if(document.getElementById('headMoving').contains(e.target)&& e.nativeEvent.targetTouches.length==1&&touchCount==0) handleDragStart(e.nativeEvent.targetTouches[0]);\n      }\n      else if(touchCount==1&&!isScaling){\n        handleDragTwoFinger(e,true);\n      }\n      setTouchCount(touchCount+1);\n    }\n  }\n\n  const handleDragTwoFinger = (e,start) => {\n    let dragTwoFingerXY_ = dragTwoFingerXY;\n\n    if(e.nativeEvent.targetTouches.length==1){\n      if(document.getElementById('headMoving')&&document.getElementById('headMoving').contains(e.nativeEvent.targetTouches[0].target)) dragTwoFingerXY_ = [{x:e.nativeEvent.targetTouches[0].clientX,y:e.nativeEvent.targetTouches[0].clientY},dragTwoFingerXY[1]];    \n      else dragTwoFingerXY_ = [dragTwoFingerXY[0],{x:e.nativeEvent.targetTouches[0].clientX,y:e.nativeEvent.targetTouches[0].clientY}]; \n    }\n    else if(e.nativeEvent.targetTouches.length==2){\n      if(document.getElementById('headMoving')&&document.getElementById('headMoving').contains(e.nativeEvent.targetTouches[0].target)) dragTwoFingerXY_ = [{x:e.nativeEvent.targetTouches[0].clientX,y:e.nativeEvent.targetTouches[0].clientY},{x:e.nativeEvent.targetTouches[1].clientX,y:e.nativeEvent.targetTouches[1].clientY}];  \n    }\n    \n    setDragTwoFingerXY(dragTwoFingerXY_);\n\n    if(start && Object.keys(dragTwoFingerXY_[0]).length!=0) {\n      setIsTwoFingerDragging(true);\n      setDragTwoFingerStart({\n        scale:iconInfo.scale,\n        dist: Math.hypot(dragTwoFingerXY_[0].x-dragTwoFingerXY_[1].x,dragTwoFingerXY_[0].y-dragTwoFingerXY_[1].y)\n      });\n    }\n  }\n\n  useEffect(() => {\n    if(isTwoFingerDragging) {\n      let dist = Math.hypot(dragTwoFingerXY[0].x-dragTwoFingerXY[1].x,dragTwoFingerXY[0].y-dragTwoFingerXY[1].y);\n      let scale = dragTwoFingerStart.scale*dist/dragTwoFingerStart.dist;\n      setIconInfo({width:iconInfo.width,height:iconInfo.height,x:iconInfo.x,y:iconInfo.y,rot:iconInfo.rot,scale:scale,flip:iconInfo.flip});\n    }\n  }, [dragTwoFingerXY]);\n\n\n  let mouseMove = null;\n  if(isScaling) mouseMove=handleScaleMove;\n  else if(isDragging) mouseMove=handleDragMove;\n\n  return (\n    <div id=\"editorContainer\" \n      onMouseMove={!isMobile&&mouseMove? (e)=>mouseMove(e.nativeEvent):null} \n      onTouchMove={isMobile?handleTouchMove:null} \n      onMouseUp={isMobile?null:handleEnd}\n      onTouchStart={isMobile?handleTouchStart:null}\n      onTouchEnd={isMobile?handleEnd:null} \n    >\n\n      {/* <div id=\"editorStartText\" className={imageSelected!=-1?'fadeOut':null} >上傳圖片以編輯</div> */}\n      <TopBar stepEnabled={stepEnabled} back={stepBack} redo={stepRedo}/>\n      {imageSelected!=-1?(\n        <div id='editorWindow'>\n          <div id='editorImage' className={isChanging?'changing':null} style={{backgroundImage:'url('+currentImage.url+')',width:currentImage.width,height:currentImage.height,transform: `scale(${editorScale})`}}>\n\n          {mode=='admin' || (currentImage.iconSelected!=undefined && currentImage.iconSelected!=-1)? (\n            <div id='headMoving' className={'head'} \n              style={{\n                width:iconInfo.width,\n                height:iconInfo.height,\n                transform: `translate(${iconInfo.x-iconInfo.width*0.5}px, ${iconInfo.y-iconInfo.height*0.5}px) rotate(${iconInfo.rot}deg) scale(${iconInfo.scale})`\n              }}\n              onMouseEnter={()=>setIsEditing(true)} \n              onMouseLeave={()=>{if(!isScaling||isMobile) setIsEditing(false)}}\n            >\n              <div className='headImage' \n                style={mode=='admin'?{backgroundImage:'url('+placeHolderImage+')'}:{backgroundImage:'url('+currentIcon.url+')',transform: `scaleX(${iconInfo.flip?-1:1})`}}\n              >\n                {mode=='admin'? <p style={{fontSize:iconInfo.width*0.1}}>移動此圖示</p>:null}\n              </div>\n\n              {iconInfo.scale>1&&mode=='user'?(\n                <div className=\"headWarningContainer\" style={{width: 40/iconInfo.scale/editorScale,height: 40/iconInfo.scale/editorScale,padding: 10/iconInfo.scale/editorScale}}>\n                  <div className='headWarning' style={{borderRadius: 6/iconInfo.scale/editorScale}}>\n                    <Icon path={mdiExclamationThick} size={1.2/iconInfo.scale/editorScale} color=\"white\"/>\n                  </div>\n                </div>\n              ):(null)}\n\n              <div className={isEditing?'tools enabled ':'tools'} style={{borderWidth:3/iconInfo.scale/editorScale}}>\n                <div id='dragClickArea' draggable=\"false\" \n                  style={{width:'100%',height:'100%'}} \n                  onMouseDown={isMobile?null:(e)=>handleDragStart(e.nativeEvent)}\n                />\n\n                <div className=\"editButton\" id='scaleButton' draggable=\"false\" \n                  style={{transform: `scale(${1/iconInfo.scale/editorScale})`}}\n                  onMouseDown={isMobile?null:(e)=>handleScaleStart(e.nativeEvent)}\n                >\n                   <Icon style={{pointerEvents:'none'}} path={mdiRotateLeft} size={1} color=\"white\"/>\n                </div>\n\n                {mode=='user'?(\n                  <>\n                    <div className=\"editButton\" id='flipButton' draggable=\"false\" \n                      style={{transform: `scale(${1/iconInfo.scale/editorScale})`}}\n                      onClick={isEditing?handleFlip:null}\n                    >\n                      <Icon path={mdiFlipHorizontal} size={1} color=\"white\"/>\n                    </div>\n\n                    <div className=\"editButton\" id='deleteButton' draggable=\"false\" \n                      style={{transform: `scale(${1/iconInfo.scale/editorScale})`}}\n                      onClick={isEditing?()=>store.dispatch({type:'UNSELECT_ICON',id:imageSelected}):null}\n                    >\n                      <Icon path={mdiDelete} size={1} color=\"white\"/>\n                    </div>\n                  </>\n                ):null}\n\n              </div>\n\n            </div>\n          ):(\n            <div className={currentImage.iconSelected && currentImage.iconSelected!=-1? 'headImage hidden' : 'headImage'} \n              style={{backgroundImage:'url('+placeHolderImage+')',width:currentImage.placeHolder.width,height:currentImage.placeHolder.height,transform: `translate(${currentImage.placeHolder.x-currentImage.placeHolder.width*0.5}px, ${currentImage.placeHolder.y-currentImage.placeHolder.height*0.5}px) rotate(${currentImage.placeHolder.rot}deg) scale(${currentImage.placeHolder.scale})`}}\n            >\n              <p style={{fontSize:currentImage.placeHolder.width*0.1}}>請選擇頭像</p>\n            </div>\n          )}\n\n          </div>\n        </div>\n      ):(null)}\n\n      {screen.screenWidth<=768||screen.screenHeight<=768? (\n        <div className='editorBottom'>\n          <div className={currentImageIndex>0?'pageArrow':'pageArrow disabled'} onClick={() => {if(currentImageIndex>0){store.dispatch({type:'SELECT_IMAGE',id:images[currentImageIndex-1].id});}}}>\n            <Icon path={mdiArrowLeftBold} size={0.8} rotate={0} color=\"#DDDDDD\" style={{transform:`translate(0.5px,0.5px)`}}/>\n          </div>\n\n          <div className='pageNumber'>第 {currentImageIndex+1} 張</div>\n          \n          <div className={currentImageIndex<images.length-1?'pageArrow':'pageArrow disabled'} onClick={() => {if(currentImageIndex<images.length-1){store.dispatch({type:'SELECT_IMAGE',id:images[currentImageIndex+1].id});}}}>\n            <Icon path={mdiArrowLeftBold} size={0.8} color=\"#DDDDDD\" style={{transform:`translate(1.5px,0.5px) rotate(180deg)`}}/>\n          </div>\n        </div>\n      ):(null)}\n      \n    </div>\n  );\n}\n\nexport default Editor;\n","import './style.css';\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useSelector } from \"react-redux\";\nimport store from '../../store';\nimport {isMobile} from 'react-device-detect';\n\nimport Icon from '@mdi/react'\nimport { mdiCloseThick } from '@mdi/js';\n\n\nfunction Slider(props) {\n\n  const screen = useSelector(state => state.screen);\n\n  const {vertical,images,selectedId,selectedText,selectItem,deleteItem,canDelete} = props;\n\n  const [highlighted,setHighlighted] = useState(-1);\n\n  let WIDTH,HEIGHT;\n  if(screen.screenWidth>768 && screen.screenHeight>768) {\n    if(vertical) {WIDTH=180;HEIGHT=100;}\n    else {WIDTH=230;HEIGHT=100;}\n  }\n  else {\n    if(vertical) {WIDTH=100;HEIGHT=100;}\n    else {WIDTH=100;HEIGHT=100;}\n  }\n \n  let sliderImageStyle = { width:WIDTH, height:HEIGHT, \"--slider-image-width\": WIDTH+'px', \"--slider-image-height\": HEIGHT+'px' };\n\n\n  const imagesList = images.map((image,index) => {\n    let ratio = image.width / image.height;\n    let width;\n    let height;\n    if(ratio>WIDTH/HEIGHT){\n      width=WIDTH;\n      height=WIDTH/ratio;\n    }\n    else {\n      height=HEIGHT;\n      width=HEIGHT*ratio;\n    }\n    let className = '';\n    if(selectedId==image.id) className += ' selected';\n    if(highlighted==image.id) className += ' pressed';\n    \n    return(\n      <div className={\"sliderImageWrapper\"+className} style={{ width:WIDTH, height:HEIGHT, \"--slider-image-width\": WIDTH+'px', \"--slider-image-height\": HEIGHT+'px' }}>\n        <div className='sliderImage' style={{width:width,height:height}}>\n          <img src={image.url} style={{width:'100%',height:'100%'}} onClick={isMobile? ()=>{if(highlighted==image.id) setHighlighted(-1); else setHighlighted(image.id)}:()=>selectItem(image.id)} \n            onMouseLeave={(e)=>{\n              console.log(e.relatedTarget.className);\n              if(e.relatedTarget.className!='deleteButtonClickArea' && e.relatedTarget.className!='chooseButtonClickArea') setHighlighted(-1);\n            }\n          }/>\n          \n          {canDelete&&!isMobile?(\n            <div className='deleteButton' onClick={()=>deleteItem(image.id)}>\n              <Icon path={mdiCloseThick} style={{transform:`translate(0.5px,0.5px)`}} size={0.8} color=\"#DDDDDD\"/>\n            </div>\n          ):null}\n        </div>\n\n        <div className=\"statusWrapper\">\n          <div className=\"statusWrapperBox\">\n            {selectedText}\n          </div>\n        </div>\n\n        {/* <div className='pressedWrapper'> */}\n          {canDelete&&isMobile?(\n            <div className=\"deleteButtonClickArea\" onClick={()=>{if(highlighted==image.id)deleteItem(image.id)}}>\n              <div className='deleteButton'>\n                <Icon path={mdiCloseThick} style={{transform:`translate(0.5px,0.5px)`,pointerEvents:'none'}} size={0.8} color=\"#DDDDDD\"/>\n              </div>\n            </div>\n          ):null}\n\n          <div className=\"chooseButtonWrapper\">\n            <div className=\"chooseButtonClickArea\" onClick={()=>{if(highlighted==image.id)selectItem(image.id)}}>\n              <div className=\"chooseButton\">\n                {selectedId==image.id?'取消':'選擇'}\n              </div>\n            </div>\n          </div>\n        {/* </div> */}\n     \n      </div>\n    )\n  });\n\n  return (\n    <div className={vertical?\"sliderContainer vertical\":\"sliderContainer\"}>\n      \n      <div className=\"sliderScrollContainer\">\n        {imagesList}\n      </div>\n    </div>\n  );\n}\n\nexport default Slider;\n","import './style.css';\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useSelector } from \"react-redux\";\nimport store from '../../store';\nimport Slider from '../../Components/Slider';\n\n\nfunction ImagesList() {\n  const images = useSelector(state => state.images);\n  const imageSelected = useSelector(state => state.imageSelected);\n\n  return (\n    <Slider images={images} selectedId={imageSelected} selectedText={'圖片編輯中'} selectItem={(id)=>store.dispatch({type:'SELECT_IMAGE',id:id})} \n      deleteItem={(id)=>{\n          if(imageSelected==id) {\n            let index = images.findIndex(image => image.id == imageSelected);\n            if(index<images.length-1) index += 1;\n            else index -= 1;\n            if(index==-1)  store.dispatch({type:'SELECT_IMAGE',id: -1});\n            else store.dispatch({type:'SELECT_IMAGE',id:images[index].id});\n          }\n          store.dispatch({type:'DELETE_IMAGE',id:id});\n        }\n      }\n    />\n  );\n}\n\nexport default ImagesList;\n","import './style.css';\nimport React, { useState, useEffect, useRef } from 'react';\nimport store from '../../store';\nimport { useSelector } from \"react-redux\";\nimport Slider from '../../Components/Slider';\nimport AddImage from '../../Components/AddImage';\n\nfunction IconsList(props) {\n\n  const screen = useSelector(state => state.screen);\n\n  const images = useSelector(state => state.images);\n  const imageSelected = useSelector(state => state.imageSelected);\n\n  const icons = useSelector(state => state.icons);\n  const iconId = useSelector(state => state.iconId);\n\n  const image = () => {\n    return images.find(image => image.id == imageSelected);\n  }\n\n  let WIDTH,HEIGHT;\n  if(screen.screenWidth>768 && screen.screenHeight>768) {WIDTH=240;HEIGHT='100%';}\n  else if (screen.screenHeight>screen.screenWidth) {WIDTH='100%';HEIGHT='100%'}\n  else {WIDTH=150;HEIGHT='100%';}\n  let containerStyle = {width:WIDTH,height:HEIGHT}\n\n  return (\n    <div className=\"iconsListContainer\" style={containerStyle}>\n\n      {screen.screenWidth<=768||screen.screenHeight<=768?null:<AddImage/>}\n\n        <Slider vertical={screen.screenWidth>768 || screen.screenHeight<=screen.screenWidth?true:false} images={icons} canDelete={true} selectedId={image()?image().iconSelected:-1} selectedText={'已選擇'}\n          selectItem={(id)=>{\n            if(imageSelected!=-1) store.dispatch({type:'SELECT_ICON',iconId:id,id:imageSelected});\n          }}\n          deleteItem={(id)=>{\n            if(!images.some(image=>image.iconSelected==id)) store.dispatch({type:'DELETE_ICON',id:id});\n          }}\n        />\n\n\n    </div>\n  );\n}\n\nexport default IconsList;\n\n\n\n","import './App.css';\nimport './animate.css';\nimport React, { useState, useEffect } from 'react';\nimport { useSelector } from \"react-redux\";\nimport store from './store';\nimport {isMobile} from 'react-device-detect';\nimport { useLocation} from \"react-router-dom\";\n\nimport Editor from './Components/Editor';\nimport ImagesList from './Components/ImagesList';\nimport IconsList from './Components/IconsList';\n\nconst temp_images = [\n  {\n    url:'https://cdn.cjr.org/wp-content/uploads/2019/07/AdobeStock_100000042-e1563305717660-686x371.jpeg',\n    width:686,\n    height:371,\n    id:0,\n    placeHolder:{\n      width:350,\n      height:350,\n      x:273.07046979865777,\n      y:209.530201342281885,\n      rot:0,\n      scale:0.23930968360498564\n    }\n  },\n  {\n    url:'https://www.geeklawblog.com/wp-content/uploads/sites/528/2018/12/liprofile-656x369.png',\n    width:656,\n    height:369,\n    id:1,\n    placeHolder:{\n      width:350,\n      height:350,\n      x:273.07046979865777,\n      y:209.530201342281885,\n      rot:0,\n      scale:0.23930968360498564\n    }\n  },\n  {\n    url:'https://png.pngtree.com/thumb_back/fh260/background/20190828/pngtree-dark-vector-abstract-background-image_302715.jpg',\n    width:555,\n    height:260,\n    id:2,\n    placeHolder:{\n      width:350,\n      height:350,\n      x:273.07046979865777,\n      y:209.530201342281885,\n      rot:0,\n      scale:0.23930968360498564\n    }\n  },\n  {\n    url:'https://www.incimages.com/uploaded_files/image/1920x1080/westworld-2-hbo-background-1920_419617.jpg',\n    width:1920,\n    height:1080,\n    id:3,\n    placeHolder:{\n      width:350,\n      height:350,\n      x:273.07046979865777,\n      y:209.530201342281885,\n      rot:0,\n      scale:0.23930968360498564\n    }\n  },\n  {\n    url:'https://cdn.cjr.org/wp-content/uploads/2019/07/AdobeStock_100000042-e1563305717660-686x371.jpeg',\n    width:686,\n    height:371,\n    id:4,\n    placeHolder:{\n      width:350,\n      height:350,\n      x:273.07046979865777,\n      y:209.530201342281885,\n      rot:0,\n      scale:0.23930968360498564\n    }\n  },\n  {\n    url:'https://www.incimages.com/uploaded_files/image/1920x1080/westworld-2-hbo-background-1920_419617.jpg',\n    width:1920,\n    height:1080,\n    id:5,\n    placeHolder:{\n      width:350,\n      height:350,\n      x:273.07046979865777,\n      y:209.530201342281885,\n      rot:0,\n      scale:0.23930968360498564\n    }\n  },\n]\n\nfunction useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nfunction App() {\n\n  let query = useQuery();\n  const mode = useSelector(state => state.mode);\n  const screen = useSelector(state => state.screen);\n\n  //execute when resizing finish\n  let resizeLoop;\n  window.addEventListener(\"resize\", ()=>{\n    clearTimeout(resizeLoop);\n    resizeLoop = setTimeout(doneResizing, 500);\n  });\n  function doneResizing(){\n    store.dispatch({type:'SET_SCREEN',screenWidth:window.innerWidth,screenHeight:window.innerHeight,orientation:window.matchMedia(\"(orientation: portrait)\")? 'landscape':'portrait'});\n    // console.log(window.innerHeight,window.innerWidth);\n  }\n\n  useEffect(() => {\n    // console.log('a',query.get('id'));\n    store.dispatch({type:'SELECT_MODE',mode:'admin'});\n\n    store.dispatch({type:'SET_IMAGES',images:temp_images});\n    store.dispatch({type:'SET_SCREEN',screenWidth:window.innerWidth,screenHeight:window.innerHeight,orientation:window.matchMedia(\"(orientation: portrait)\")? 'landscape':'portrait'});\n  }, []);\n\n\n  return (\n    <div className={isMobile? \"appContainer isMobile\":\"appContainer isDesktop\"} style={{height:screen.screenHeight}}>\n\n      {mode=='user' && (screen.screenWidth>768 || screen.screenHeight<screen.screenWidth)?  <IconsList/>:null}\n      \n      <div style={{flex:1}} className='ColumnRevContainer'>\n        {screen.screenHeight>768 || (screen.screenHeight>=screen.screenWidth && mode=='user')?(\n          <div className=\"bottomRow\">\n            {screen.screenWidth>768? <ImagesList/>:<IconsList/>}\n          </div>\n        ):null} \n        <Editor/>\n      </div>\n\n{/* <div style={{position:'absolute',bottom:0}} onClick={()=>console.log('asdf')}>asdf</div> */}\n\n    </div>\n\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport { Provider } from 'react-redux';\nimport store from './store';\n\nimport { BrowserRouter as Router} from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('gallery-builder-root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}